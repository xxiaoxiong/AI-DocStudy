# AIåŸ¹è®­æ•™å­¦ç³»ç»Ÿ - æ ¸å¿ƒåŠŸèƒ½è®¾è®¡æ–¹æ¡ˆ

## ä¸€ã€é¡¹ç›®å®šä½

è¿™æ˜¯ä¸€ä¸ª**ä¸­å°å‹AIåŸ¹è®­æ•™å­¦ç³»ç»Ÿ**,é¢å‘ä¼ä¸šå†…è®­ã€æ”¿ç­–å­¦ä¹ ã€æŠ€æœ¯æ–‡æ¡£åŸ¹è®­ç­‰åœºæ™¯ã€‚

### æ ¸å¿ƒç‰¹ç‚¹
- ä½¿ç”¨å†…ç½‘30Bæ¨¡å‹(å‰æœŸç”¨DeepSeek APIè°ƒè¯•)
- MySQLä½œä¸ºä¸»æ•°æ®åº“
- æ³¨é‡å®ç”¨æ€§å’Œé€šç”¨æ€§
- å¿«é€Ÿéƒ¨ç½²,æ˜“äºç»´æŠ¤

---

## äºŒã€æ ¸å¿ƒåŠŸèƒ½æ¨¡å—(MVPç‰ˆæœ¬)

æœ¬æ¬¡MVPç‰ˆæœ¬èšç„¦æœ€æ ¸å¿ƒçš„**3ä¸ªæ¨¡å—**,å¿«é€ŸéªŒè¯æ ¸å¿ƒä»·å€¼:

### ğŸ¯ æ¨¡å—1: æ–‡æ¡£æ™ºèƒ½è§£æä¸çŸ¥è¯†æå–

**ä¸ºä»€ä¹ˆé‡è¦**: è¿™æ˜¯ä¸€åˆ‡çš„åŸºç¡€,æŠŠæ–‡æ¡£å˜æˆå¯å­¦ä¹ çš„ç»“æ„åŒ–å†…å®¹

**æ ¸å¿ƒåŠŸèƒ½**:
1. ä¸Šä¼ æ–‡æ¡£(PDF/Word/TXT/Markdown)
2. è‡ªåŠ¨æå–ç« èŠ‚ç»“æ„
3. ç”Ÿæˆæ–‡æ¡£æ‘˜è¦(3ä¸ªå±‚æ¬¡):
   - ä¸€å¥è¯æ€»ç»“(30å­—å†…)
   - æ ¸å¿ƒè¦ç‚¹(5-10æ¡)
   - è¯¦ç»†å¤§çº²(ç« èŠ‚æ ‘)
4. æå–å…³é”®æ¦‚å¿µå’Œæœ¯è¯­è§£é‡Š

**è¾“å‡ºå½¢å¼**:
```
æ–‡æ¡£: ã€Šæ•°æ®å®‰å…¨æ³•è§£è¯»ã€‹
â”œâ”€ æ‘˜è¦: æœ¬æ³•è§„å®šäº†æ•°æ®å¤„ç†æ´»åŠ¨çš„å®‰å…¨ä¹‰åŠ¡...
â”œâ”€ æ ¸å¿ƒè¦ç‚¹:
â”‚  â”œâ”€ 1. æ•°æ®åˆ†ç±»åˆ†çº§åˆ¶åº¦
â”‚  â”œâ”€ 2. æ•°æ®å®‰å…¨å®¡æŸ¥æœºåˆ¶
â”‚  â””â”€ 3. è¿æ³•è¡Œä¸ºå¤„ç½šæ ‡å‡†
â”œâ”€ ç« èŠ‚å¤§çº²:
â”‚  â”œâ”€ ç¬¬ä¸€ç«  æ€»åˆ™
â”‚  â”œâ”€ ç¬¬äºŒç«  æ•°æ®å®‰å…¨ä¸å‘å±•
â”‚  â””â”€ ...
â””â”€ å…³é”®æœ¯è¯­: æ•°æ®å¤„ç†è€…ã€é‡è¦æ•°æ®ã€æ ¸å¿ƒæ•°æ®...
```

---

### ğŸ’¬ æ¨¡å—2: æ™ºèƒ½é—®ç­”(RAG)

**ä¸ºä»€ä¹ˆé‡è¦**: æœ€é«˜é¢‘çš„ä½¿ç”¨åœºæ™¯,å­¦å‘˜éšæ—¶æé—®,ç³»ç»ŸåŸºäºæ–‡æ¡£å›ç­”

**æ ¸å¿ƒåŠŸèƒ½**:
1. åŸºäºæ–‡æ¡£å†…å®¹çš„é—®ç­”
2. å¼•ç”¨åŸæ–‡å‡ºå¤„(æ ‡æ³¨é¡µç /ç« èŠ‚)
3. ç›¸å…³é—®é¢˜æ¨è
4. å¯¹è¯å†å²è®°å½•

**æŠ€æœ¯è¦ç‚¹**:
- æ–‡æ¡£åˆ†å—(chunk_size=500, overlap=50)
- å‘é‡æ£€ç´¢(ä½¿ç”¨å¼€æºembeddingæ¨¡å‹å¦‚bge-large-zh)
- Promptæ¨¡æ¿:
```
ä½ æ˜¯åŸ¹è®­åŠ©æ•™,åŸºäºä»¥ä¸‹æ–‡æ¡£å†…å®¹å›ç­”é—®é¢˜ã€‚

æ–‡æ¡£ç‰‡æ®µ:
{retrieved_chunks}

ç”¨æˆ·é—®é¢˜: {question}

è¦æ±‚:
1. åªåŸºäºæ–‡æ¡£å†…å®¹å›ç­”,ä¸è¦ç¼–é€ 
2. æ ‡æ³¨ä¿¡æ¯æ¥æº(ç« èŠ‚/é¡µç )
3. å¦‚æœæ–‡æ¡£ä¸­æ²¡æœ‰ç›¸å…³å†…å®¹,æ˜ç¡®å‘ŠçŸ¥
```

**å®é™…åœºæ™¯**:
```
å­¦å‘˜: "æ•°æ®å®‰å…¨æ³•å¯¹ä¸ªäººä¿¡æ¯ä¿æŠ¤æœ‰ä»€ä¹ˆè§„å®š?"
ç³»ç»Ÿ: "æ ¹æ®ç¬¬ä¸‰ç« ç¬¬21æ¡,æ•°æ®å¤„ç†è€…åº”å½“å»ºç«‹ä¸ªäººä¿¡æ¯ä¿æŠ¤åˆ¶åº¦...
      [æ¥æº: ç¬¬ä¸‰ç«  æ•°æ®å®‰å…¨åˆ¶åº¦ > ç¬¬21æ¡]"
```

---

### ğŸ“ æ¨¡å—3: è‡ªåŠ¨å‡ºé¢˜ä¸è€ƒè¯•

**ä¸ºä»€ä¹ˆé‡è¦**: æ£€éªŒå­¦ä¹ æ•ˆæœ,æœ€åˆšéœ€çš„åŠŸèƒ½

**æ ¸å¿ƒåŠŸèƒ½**:
1. **è‡ªåŠ¨ç”Ÿæˆé¢˜ç›®**(3ç§é¢˜å‹å°±å¤Ÿ):
   - å•é€‰é¢˜(æœ€å¸¸ç”¨)
   - åˆ¤æ–­é¢˜(å¿«é€Ÿæ£€æµ‹)
   - ç®€ç­”é¢˜(æ·±åº¦ç†è§£)
2. **ç»„å·åŠŸèƒ½**:
   - æŒ‰ç« èŠ‚å‡ºé¢˜
   - æŒ‰éš¾åº¦é…æ¯”(ç®€å•:ä¸­ç­‰:å›°éš¾ = 5:3:2)
   - è®¾ç½®é¢˜é‡å’Œæ—¶é•¿
3. **è‡ªåŠ¨æ‰¹æ”¹**:
   - å®¢è§‚é¢˜å³æ—¶åˆ¤åˆ†
   - ç®€ç­”é¢˜AIè¯„åˆ†(å…³é”®è¯+è¯­ä¹‰ç›¸ä¼¼åº¦)
4. **æˆç»©åˆ†æ**:
   - ä¸ªäººæˆç»©å•
   - é”™é¢˜ç»Ÿè®¡
   - è–„å¼±çŸ¥è¯†ç‚¹è¯†åˆ«

**å‡ºé¢˜Prompt**:
```
åŸºäºä»¥ä¸‹æ–‡æ¡£å†…å®¹ç”Ÿæˆ{é¢˜å‹}:

æ–‡æ¡£å†…å®¹:
{content}

è¦æ±‚:
1. é¢˜ç›®éš¾åº¦: {difficulty}
2. è€ƒå¯Ÿé‡ç‚¹: {focus_area}
3. è¾“å‡ºJSONæ ¼å¼:
{
  "question": "é¢˜ç›®å†…å®¹",
  "options": ["Aé€‰é¡¹", "Bé€‰é¡¹", "Cé€‰é¡¹", "Dé€‰é¡¹"],
  "answer": "B",
  "explanation": "è§£æè¯´æ˜",
  "source": "ç¬¬Xç« ç¬¬YèŠ‚"
}
```

**è¯´æ˜**: å­¦ä¹ è¿›åº¦è·Ÿè¸ªå’Œå­¦ä¹ è·¯å¾„æ¨èåŠŸèƒ½å°†åœ¨V2.0ç‰ˆæœ¬ä¸­å®ç°,æœ¬æ¬¡MVPä¸“æ³¨äºæ ¸å¿ƒçš„æ–‡æ¡£å¤„ç†ã€é—®ç­”å’Œè€ƒè¯•åŠŸèƒ½ã€‚

---

## ä¸‰ã€æŠ€æœ¯æ¶æ„(ç²¾ç®€ç‰ˆ)

### 3.1 æŠ€æœ¯æ ˆ

**åç«¯**:
- FastAPI (Python 3.10+)
- MySQL 8.0
- Redis (ç¼“å­˜+ä¼šè¯)
- Chroma (å‘é‡æ•°æ®åº“,è½»é‡çº§)
- SQLAlchemy (ORM)
- Pydantic (æ•°æ®éªŒè¯)

**å‰ç«¯**:
- Vue 3 + TypeScript
- Element Plus (ä¼ä¸šçº§UIç»„ä»¶åº“)
- Pinia (çŠ¶æ€ç®¡ç†)
- Vue Router (è·¯ç”±)
- Axios (HTTPå®¢æˆ·ç«¯)
- ECharts (æ•°æ®å¯è§†åŒ–)
- Vite (æ„å»ºå·¥å…·)

**AIç›¸å…³**:
- DeepSeek API (å¼€å‘è°ƒè¯•)
- å†…ç½‘30Bæ¨¡å‹ (ç”Ÿäº§ç¯å¢ƒ)
- bge-large-zh (å¼€æºembeddingæ¨¡å‹)

### 3.2 ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å‰ç«¯ (Vue3 + Element Plus)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚æ–‡æ¡£æ¨¡å—  â”‚ â”‚é—®ç­”æ¨¡å—  â”‚ â”‚è€ƒè¯•æ¨¡å—  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                    PiniaçŠ¶æ€ç®¡ç†                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ HTTP/REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   APIç½‘å…³å±‚ (FastAPI)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚æ–‡æ¡£API   â”‚ â”‚é—®ç­”API   â”‚ â”‚è€ƒè¯•API   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                    ä¸­é—´ä»¶(è®¤è¯/æ—¥å¿—/é”™è¯¯å¤„ç†)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸šåŠ¡é€»è¾‘å±‚ (Services)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚æ–‡æ¡£æœåŠ¡      â”‚ â”‚AIæœåŠ¡        â”‚ â”‚RAGæœåŠ¡       â”‚   â”‚
â”‚  â”‚- Parser      â”‚ â”‚- LLM Client  â”‚ â”‚- Retriever   â”‚   â”‚
â”‚  â”‚- Processor   â”‚ â”‚- Embedding   â”‚ â”‚- Reranker    â”‚   â”‚
â”‚  â”‚- Chunker     â”‚ â”‚- Prompt Mgr  â”‚ â”‚- Generator   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚è€ƒè¯•æœåŠ¡      â”‚                                       â”‚
â”‚  â”‚- Generator   â”‚                                       â”‚
â”‚  â”‚- Grader      â”‚                                       â”‚
â”‚  â”‚- Analyzer    â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®è®¿é—®å±‚ (Repositories)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚User Repo â”‚ â”‚Doc Repo  â”‚ â”‚Exam Repo â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å­˜å‚¨å±‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚MySQL     â”‚ â”‚Chroma    â”‚ â”‚Redis     â”‚ â”‚MinIO/OSS â”‚  â”‚
â”‚  â”‚(ä¸šåŠ¡æ•°æ®)â”‚ â”‚(å‘é‡åº“)  â”‚ â”‚(ç¼“å­˜)    â”‚ â”‚(æ–‡ä»¶)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 é¡¹ç›®ç»“æ„(æ¨¡å—åŒ–è®¾è®¡)

```
AI-DocStudy/
â”œâ”€â”€ backend/                           # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/                       # APIè·¯ç”±å±‚(æŒ‰æ¨¡å—åˆ’åˆ†)
â”‚   â”‚   â”‚   â”œâ”€â”€ v1/                    # APIç‰ˆæœ¬æ§åˆ¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py            # è®¤è¯ç›¸å…³API
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ documents/         # æ–‡æ¡£æ¨¡å—API
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ upload.py      # æ–‡æ¡£ä¸Šä¼ 
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ manage.py      # æ–‡æ¡£ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ parse.py       # æ–‡æ¡£è§£æ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ qa/                # é—®ç­”æ¨¡å—API
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat.py        # æ™ºèƒ½é—®ç­”
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ history.py     # é—®ç­”å†å²
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ exam/              # è€ƒè¯•æ¨¡å—API
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ questions.py   # é¢˜ç›®ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ exams.py       # è€ƒè¯•ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ records.py     # ç­”é¢˜è®°å½•
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ users.py           # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ deps.py                # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ core/                      # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py              # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ security.py            # å®‰å…¨ç›¸å…³
â”‚   â”‚   â”‚   â””â”€â”€ database.py            # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/                    # æ•°æ®æ¨¡å‹(ORM)
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py                # åŸºç¡€æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py                # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ document.py            # æ–‡æ¡£æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ question.py            # é¢˜ç›®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ exam.py                # è€ƒè¯•æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ learning.py            # å­¦ä¹ è®°å½•æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ qa.py                  # é—®ç­”è®°å½•æ¨¡å‹
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ schemas/                   # Pydanticæ¨¡å¼(æ•°æ®éªŒè¯)
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ document.py
â”‚   â”‚   â”‚   â”œâ”€â”€ question.py
â”‚   â”‚   â”‚   â”œâ”€â”€ exam.py
â”‚   â”‚   â”‚   â”œâ”€â”€ learning.py
â”‚   â”‚   â”‚   â””â”€â”€ qa.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                  # ä¸šåŠ¡é€»è¾‘å±‚(æ ¸å¿ƒæœåŠ¡)
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ document/              # æ–‡æ¡£æœåŠ¡æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ parser.py          # æ–‡æ¡£è§£æå™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ processor.py       # æ–‡æ¡£å¤„ç†å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chunker.py         # æ–‡æ¡£åˆ†å—
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ extractor.py       # ä¿¡æ¯æå–
â”‚   â”‚   â”‚   â”œâ”€â”€ ai/                    # AIæœåŠ¡æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ llm_client.py      # LLMå®¢æˆ·ç«¯(ç»Ÿä¸€æ¥å£)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ deepseek.py        # DeepSeekå®ç°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ internal.py        # å†…ç½‘æ¨¡å‹å®ç°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ embedding.py       # EmbeddingæœåŠ¡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ prompt_templates.py # Promptæ¨¡æ¿ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ rag/                   # RAGæœåŠ¡æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ retriever.py       # å‘é‡æ£€ç´¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ reranker.py        # é‡æ’åº
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ generator.py       # ç­”æ¡ˆç”Ÿæˆ
â”‚   â”‚   â”‚   â””â”€â”€ exam/                  # è€ƒè¯•æœåŠ¡æ¨¡å—
â”‚   â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚       â”œâ”€â”€ question_generator.py  # é¢˜ç›®ç”Ÿæˆ
â”‚   â”‚   â”‚       â”œâ”€â”€ grader.py          # è‡ªåŠ¨è¯„åˆ†
â”‚   â”‚   â”‚       â””â”€â”€ analyzer.py        # æˆç»©åˆ†æ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ repositories/              # æ•°æ®è®¿é—®å±‚(Repositoryæ¨¡å¼)
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py                # åŸºç¡€Repository
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ document.py
â”‚   â”‚   â”‚   â”œâ”€â”€ question.py
â”‚   â”‚   â”‚   â”œâ”€â”€ exam.py
â”‚   â”‚   â”‚   â””â”€â”€ qa.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ file_handler.py        # æ–‡ä»¶å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ text_processor.py      # æ–‡æœ¬å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ cache.py               # ç¼“å­˜å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.py              # æ—¥å¿—å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ validators.py          # éªŒè¯å™¨
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ middleware/                # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py                # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ cors.py                # CORSä¸­é—´ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ error_handler.py       # é”™è¯¯å¤„ç†
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ main.py                    # åº”ç”¨å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/                         # æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ unit/                      # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ integration/               # é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ conftest.py
â”‚   â”‚
â”‚   â”œâ”€â”€ alembic/                       # æ•°æ®åº“è¿ç§»
â”‚   â”‚   â”œâ”€â”€ versions/
â”‚   â”‚   â””â”€â”€ env.py
â”‚   â”‚
â”‚   â”œâ”€â”€ scripts/                       # è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ init_db.py                 # åˆå§‹åŒ–æ•°æ®åº“
â”‚   â”‚   â””â”€â”€ seed_data.py               # ç§å­æ•°æ®
â”‚   â”‚
â”‚   â”œâ”€â”€ requirements.txt               # ä¾èµ–
â”‚   â”œâ”€â”€ requirements-dev.txt           # å¼€å‘ä¾èµ–
â”‚   â”œâ”€â”€ .env.example                   # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ frontend/                          # å‰ç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ modules/                   # åŠŸèƒ½æ¨¡å—(æŒ‰ä¸šåŠ¡åˆ’åˆ†)
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                  # è®¤è¯æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ views/             # é¡µé¢
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Register.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/        # ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api/               # APIæ¥å£
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ stores/            # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ authStore.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ types/             # ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ router.ts          # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ document/              # æ–‡æ¡£æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentList.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentDetail.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentUpload.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DocumentReader.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentCard.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SectionTree.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SummaryPanel.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UploadDialog.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ document.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ documentStore.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ composables/       # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useDocument.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useUpload.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ router.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ qa/                    # é—®ç­”æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ QAChat.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ QAHistory.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatWindow.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MessageItem.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SourceReference.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ QuestionSuggestion.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ qa.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ qaStore.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ composables/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useChat.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ router.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ exam/                  # è€ƒè¯•æ¨¡å—
â”‚   â”‚   â”‚       â”œâ”€â”€ views/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ExamList.vue
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ExamDetail.vue
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ExamTaking.vue
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ExamResult.vue
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ QuestionBank.vue
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ QuestionGenerate.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ components/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ QuestionCard.vue
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ SingleChoice.vue
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ JudgeQuestion.vue
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ EssayQuestion.vue
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ExamTimer.vue
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ScoreChart.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ api/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ question.ts
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ exam.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ stores/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ examStore.ts
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ questionStore.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ types/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ composables/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ useExam.ts
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ useQuestion.ts
â”‚   â”‚   â”‚       â””â”€â”€ router.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ shared/                    # å…±äº«èµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ components/            # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Layout/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppLayout.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Header.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Footer.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Common/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Loading.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Empty.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorPage.vue
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Pagination.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Charts/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ LineChart.vue
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ BarChart.vue
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ RadarChart.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ composables/           # é€šç”¨ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useRequest.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ usePagination.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useDebounce.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ request.ts         # HTTPè¯·æ±‚å°è£…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ storage.ts         # æœ¬åœ°å­˜å‚¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ format.ts          # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ validate.ts        # éªŒè¯å·¥å…·
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ constants.ts       # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ types/                 # å…¨å±€ç±»å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ common.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚   â””â”€â”€ styles/                # å…¨å±€æ ·å¼
â”‚   â”‚   â”‚       â”œâ”€â”€ variables.scss     # å˜é‡
â”‚   â”‚   â”‚       â”œâ”€â”€ mixins.scss        # æ··å…¥
â”‚   â”‚   â”‚       â””â”€â”€ global.scss        # å…¨å±€æ ·å¼
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ router/                    # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts               # ä¸»è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ guards.ts              # è·¯ç”±å®ˆå«
â”‚   â”‚   â”‚   â””â”€â”€ routes.ts              # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ stores/                    # å…¨å±€çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â””â”€â”€ app.ts                 # åº”ç”¨çŠ¶æ€
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ assets/                    # é™æ€èµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”‚   â”œâ”€â”€ icons/
â”‚   â”‚   â”‚   â””â”€â”€ fonts/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.vue                    # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.ts                    # å…¥å£æ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ public/                        # å…¬å…±èµ„æº
â”‚   â”œâ”€â”€ tests/                         # æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â””â”€â”€ e2e/
â”‚   â”œâ”€â”€ .env.development               # å¼€å‘ç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ .env.production                # ç”Ÿäº§ç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ vite.config.ts                 # Viteé…ç½®
â”‚   â”œâ”€â”€ tsconfig.json                  # TypeScripté…ç½®
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ docs/                              # æ–‡æ¡£
â”‚   â”œâ”€â”€ api/                           # APIæ–‡æ¡£
â”‚   â”œâ”€â”€ design/                        # è®¾è®¡æ–‡æ¡£
â”‚   â””â”€â”€ deployment/                    # éƒ¨ç½²æ–‡æ¡£
â”‚
â”œâ”€â”€ docker-compose.yml                 # Dockerç¼–æ’
â”œâ”€â”€ docker-compose.dev.yml             # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

### 3.4 æ¨¡å—åŒ–è®¾è®¡åŸåˆ™

#### åç«¯æ¨¡å—åŒ–
1. **åˆ†å±‚æ¶æ„**: APIå±‚ â†’ Serviceå±‚ â†’ Repositoryå±‚ â†’ Modelå±‚
2. **å•ä¸€èŒè´£**: æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªä¸šåŠ¡é¢†åŸŸ
3. **ä¾èµ–æ³¨å…¥**: ä½¿ç”¨FastAPIçš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿ
4. **æ¥å£æŠ½è±¡**: LLMå®¢æˆ·ç«¯ä½¿ç”¨æŠ½è±¡åŸºç±»,æ–¹ä¾¿åˆ‡æ¢æ¨¡å‹

#### å‰ç«¯æ¨¡å—åŒ–
1. **æŒ‰ä¸šåŠ¡åˆ’åˆ†**: æ¯ä¸ªä¸šåŠ¡æ¨¡å—ç‹¬ç«‹ç›®å½•
2. **æ¨¡å—è‡ªæ²»**: æ¯ä¸ªæ¨¡å—åŒ…å«views/components/api/stores/types
3. **å…±äº«èµ„æº**: é€šç”¨ç»„ä»¶å’Œå·¥å…·æ”¾åœ¨sharedç›®å½•
4. **è·¯ç”±æ‡’åŠ è½½**: æ¯ä¸ªæ¨¡å—çš„è·¯ç”±ç‹¬ç«‹é…ç½®

#### å¯æ‰©å±•æ€§è®¾è®¡
1. **æ’ä»¶åŒ–æ¶æ„**: æ–°å¢æ¨¡å—åªéœ€æ·»åŠ æ–°ç›®å½•
2. **é…ç½®é©±åŠ¨**: ä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†åŠŸèƒ½å¼€å…³
3. **ç‰ˆæœ¬æ§åˆ¶**: APIä½¿ç”¨ç‰ˆæœ¬å·(v1/v2)
4. **æ¥å£ç»Ÿä¸€**: ç»Ÿä¸€çš„å“åº”æ ¼å¼å’Œé”™è¯¯å¤„ç†

---

## å››ã€æ•°æ®åº“è®¾è®¡(MySQL)

### 4.1 æ ¸å¿ƒè¡¨ç»“æ„

#### 1. ç”¨æˆ·è¡¨ (users)
```sql
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    role ENUM('student', 'teacher', 'admin') DEFAULT 'student',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP NULL,
    INDEX idx_username (username),
    INDEX idx_email (email)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 2. æ–‡æ¡£è¡¨ (documents)
```sql
CREATE TABLE documents (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    file_path VARCHAR(500) NOT NULL,
    file_type VARCHAR(20) NOT NULL,
    file_size INT,
    status ENUM('processing', 'completed', 'failed') DEFAULT 'processing',
    summary TEXT,
    uploaded_by INT,
    uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    processed_at TIMESTAMP NULL,
    FOREIGN KEY (uploaded_by) REFERENCES users(id),
    INDEX idx_status (status),
    INDEX idx_uploaded_by (uploaded_by)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 3. æ–‡æ¡£ç« èŠ‚è¡¨ (document_sections)
```sql
CREATE TABLE document_sections (
    id INT AUTO_INCREMENT PRIMARY KEY,
    document_id INT NOT NULL,
    title VARCHAR(255) NOT NULL,
    content TEXT,
    level INT DEFAULT 1,  -- ç« èŠ‚å±‚çº§
    parent_id INT NULL,   -- çˆ¶ç« èŠ‚ID
    order_index INT DEFAULT 0,
    FOREIGN KEY (document_id) REFERENCES documents(id) ON DELETE CASCADE,
    FOREIGN KEY (parent_id) REFERENCES document_sections(id) ON DELETE CASCADE,
    INDEX idx_document (document_id),
    INDEX idx_parent (parent_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 4. é¢˜ç›®è¡¨ (questions)
```sql
CREATE TABLE questions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    document_id INT NOT NULL,
    section_id INT NULL,
    type ENUM('single', 'judge', 'essay') NOT NULL,
    difficulty ENUM('easy', 'medium', 'hard') DEFAULT 'medium',
    content TEXT NOT NULL,
    options JSON NULL,  -- é€‰æ‹©é¢˜é€‰é¡¹ ["Aé€‰é¡¹", "Bé€‰é¡¹", ...]
    answer TEXT NOT NULL,
    explanation TEXT,
    source_reference VARCHAR(255),  -- æ¥æºç« èŠ‚
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (document_id) REFERENCES documents(id) ON DELETE CASCADE,
    FOREIGN KEY (section_id) REFERENCES document_sections(id) ON DELETE SET NULL,
    INDEX idx_document (document_id),
    INDEX idx_type_difficulty (type, difficulty)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 5. è€ƒè¯•è¡¨ (exams)
```sql
CREATE TABLE exams (
    id INT AUTO_INCREMENT PRIMARY KEY,
    document_id INT NOT NULL,
    title VARCHAR(255) NOT NULL,
    description TEXT,
    duration INT DEFAULT 60,  -- è€ƒè¯•æ—¶é•¿(åˆ†é’Ÿ)
    total_score INT DEFAULT 100,
    pass_score INT DEFAULT 60,
    created_by INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (document_id) REFERENCES documents(id) ON DELETE CASCADE,
    FOREIGN KEY (created_by) REFERENCES users(id),
    INDEX idx_document (document_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 6. è€ƒè¯•é¢˜ç›®å…³è”è¡¨ (exam_questions)
```sql
CREATE TABLE exam_questions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    exam_id INT NOT NULL,
    question_id INT NOT NULL,
    score INT DEFAULT 10,  -- è¯¥é¢˜åˆ†å€¼
    order_index INT DEFAULT 0,
    FOREIGN KEY (exam_id) REFERENCES exams(id) ON DELETE CASCADE,
    FOREIGN KEY (question_id) REFERENCES questions(id) ON DELETE CASCADE,
    INDEX idx_exam (exam_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 7. ç­”é¢˜è®°å½•è¡¨ (answer_records)
```sql
CREATE TABLE answer_records (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    exam_id INT NULL,  -- å¦‚æœæ˜¯è€ƒè¯•ç­”é¢˜
    question_id INT NOT NULL,
    user_answer TEXT,
    is_correct TINYINT(1) DEFAULT 0,
    score DECIMAL(5,2) DEFAULT 0,
    ai_feedback TEXT,  -- AIè¯„åˆ†åé¦ˆ
    time_spent INT DEFAULT 0,  -- ç­”é¢˜æ—¶é•¿(ç§’)
    answered_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (exam_id) REFERENCES exams(id) ON DELETE CASCADE,
    FOREIGN KEY (question_id) REFERENCES questions(id) ON DELETE CASCADE,
    INDEX idx_user_question (user_id, question_id),
    INDEX idx_exam (exam_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 8. é—®ç­”è®°å½•è¡¨ (qa_records)
```sql
CREATE TABLE qa_records (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    document_id INT NOT NULL,
    question TEXT NOT NULL,
    answer TEXT NOT NULL,
    sources JSON,  -- å¼•ç”¨æ¥æº [{"section": "ç¬¬1ç« ", "content": "..."}]
    helpful TINYINT(1) NULL,  -- ç”¨æˆ·åé¦ˆ: 1æœ‰å¸®åŠ© 0æ— å¸®åŠ©
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (document_id) REFERENCES documents(id) ON DELETE CASCADE,
    INDEX idx_user (user_id),
    INDEX idx_document (document_id),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 9. æ–‡æ¡£å‘é‡è¡¨ (document_chunks)
```sql
CREATE TABLE document_chunks (
    id INT AUTO_INCREMENT PRIMARY KEY,
    document_id INT NOT NULL,
    section_id INT NULL,
    chunk_index INT NOT NULL,
    content TEXT NOT NULL,
    chunk_hash VARCHAR(64),  -- å†…å®¹hash,ç”¨äºå»é‡
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (document_id) REFERENCES documents(id) ON DELETE CASCADE,
    FOREIGN KEY (section_id) REFERENCES document_sections(id) ON DELETE SET NULL,
    INDEX idx_document (document_id),
    INDEX idx_hash (chunk_hash)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

### 4.2 æ•°æ®åº“å…³ç³»å›¾

```
users (ç”¨æˆ·)
  â”œâ”€â†’ documents (ä¸Šä¼ çš„æ–‡æ¡£)
  â”œâ”€â†’ answer_records (ç­”é¢˜è®°å½•)
  â””â”€â†’ qa_records (é—®ç­”è®°å½•)

documents (æ–‡æ¡£)
  â”œâ”€â†’ document_sections (ç« èŠ‚)
  â”œâ”€â†’ document_chunks (æ–‡æ¡£åˆ†å—,ç”¨äºå‘é‡æ£€ç´¢)
  â”œâ”€â†’ questions (é¢˜ç›®)
  â””â”€â†’ exams (è€ƒè¯•)

exams (è€ƒè¯•)
  â””â”€â†’ exam_questions (è€ƒè¯•é¢˜ç›®å…³è”)
      â””â”€â†’ questions (é¢˜ç›®)
```

---

## äº”ã€æ ¸å¿ƒä»£ç ç¤ºä¾‹

### 5.1 åç«¯æ ¸å¿ƒä»£ç 

#### LLMå®¢æˆ·ç«¯æŠ½è±¡(æ”¯æŒå¤šæ¨¡å‹åˆ‡æ¢)

```python
# app/services/ai/llm_client.py
from abc import ABC, abstractmethod
from typing import Dict, Any, Optional

class BaseLLMClient(ABC):
    """LLMå®¢æˆ·ç«¯æŠ½è±¡åŸºç±»"""
    
    @abstractmethod
    async def chat(
        self, 
        messages: list[Dict[str, str]], 
        temperature: float = 0.7,
        max_tokens: Optional[int] = None
    ) -> str:
        """èŠå¤©æ¥å£"""
        pass
    
    @abstractmethod
    async def generate(
        self, 
        prompt: str, 
        **kwargs
    ) -> str:
        """ç”Ÿæˆæ¥å£"""
        pass


# app/services/ai/deepseek.py
import httpx
from .llm_client import BaseLLMClient

class DeepSeekClient(BaseLLMClient):
    """DeepSeek APIå®¢æˆ·ç«¯"""
    
    def __init__(self, api_key: str, base_url: str):
        self.api_key = api_key
        self.base_url = base_url
        self.client = httpx.AsyncClient()
    
    async def chat(self, messages: list, temperature: float = 0.7, max_tokens: int = None):
        response = await self.client.post(
            f"{self.base_url}/chat/completions",
            headers={"Authorization": f"Bearer {self.api_key}"},
            json={
                "model": "deepseek-chat",
                "messages": messages,
                "temperature": temperature,
                "max_tokens": max_tokens
            }
        )
        return response.json()["choices"][0]["message"]["content"]
    
    async def generate(self, prompt: str, **kwargs):
        return await self.chat([{"role": "user", "content": prompt}], **kwargs)


# app/services/ai/internal.py
class InternalLLMClient(BaseLLMClient):
    """å†…ç½‘30Bæ¨¡å‹å®¢æˆ·ç«¯"""
    
    def __init__(self, base_url: str):
        self.base_url = base_url
        self.client = httpx.AsyncClient()
    
    async def chat(self, messages: list, temperature: float = 0.7, max_tokens: int = None):
        # é€‚é…å†…ç½‘æ¨¡å‹çš„APIæ ¼å¼
        response = await self.client.post(
            f"{self.base_url}/generate",
            json={
                "messages": messages,
                "temperature": temperature,
                "max_tokens": max_tokens
            }
        )
        return response.json()["text"]
    
    async def generate(self, prompt: str, **kwargs):
        return await self.chat([{"role": "user", "content": prompt}], **kwargs)


# app/core/config.py
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    # LLMé…ç½®
    LLM_PROVIDER: str = "deepseek"  # deepseek | internal
    DEEPSEEK_API_KEY: str = ""
    DEEPSEEK_BASE_URL: str = "https://api.deepseek.com/v1"
    INTERNAL_LLM_URL: str = "http://internal-llm:8000"
    
    class Config:
        env_file = ".env"

settings = Settings()


# app/services/ai/__init__.py
from .llm_client import BaseLLMClient
from .deepseek import DeepSeekClient
from .internal import InternalLLMClient
from ..core.config import settings

def get_llm_client() -> BaseLLMClient:
    """å·¥å‚æ–¹æ³•: æ ¹æ®é…ç½®è¿”å›å¯¹åº”çš„LLMå®¢æˆ·ç«¯"""
    if settings.LLM_PROVIDER == "deepseek":
        return DeepSeekClient(
            api_key=settings.DEEPSEEK_API_KEY,
            base_url=settings.DEEPSEEK_BASE_URL
        )
    elif settings.LLM_PROVIDER == "internal":
        return InternalLLMClient(base_url=settings.INTERNAL_LLM_URL)
    else:
        raise ValueError(f"Unknown LLM provider: {settings.LLM_PROVIDER}")
```

#### Repositoryæ¨¡å¼(æ•°æ®è®¿é—®å±‚)

```python
# app/repositories/base.py
from typing import Generic, TypeVar, Type, Optional, List
from sqlalchemy.orm import Session
from sqlalchemy import select

ModelType = TypeVar("ModelType")

class BaseRepository(Generic[ModelType]):
    """åŸºç¡€Repository"""
    
    def __init__(self, model: Type[ModelType], db: Session):
        self.model = model
        self.db = db
    
    async def get(self, id: int) -> Optional[ModelType]:
        return self.db.get(self.model, id)
    
    async def get_multi(
        self, 
        skip: int = 0, 
        limit: int = 100
    ) -> List[ModelType]:
        stmt = select(self.model).offset(skip).limit(limit)
        result = self.db.execute(stmt)
        return result.scalars().all()
    
    async def create(self, obj_in: dict) -> ModelType:
        db_obj = self.model(**obj_in)
        self.db.add(db_obj)
        self.db.commit()
        self.db.refresh(db_obj)
        return db_obj
    
    async def update(self, id: int, obj_in: dict) -> Optional[ModelType]:
        db_obj = await self.get(id)
        if db_obj:
            for field, value in obj_in.items():
                setattr(db_obj, field, value)
            self.db.commit()
            self.db.refresh(db_obj)
        return db_obj
    
    async def delete(self, id: int) -> bool:
        db_obj = await self.get(id)
        if db_obj:
            self.db.delete(db_obj)
            self.db.commit()
            return True
        return False


# app/repositories/document.py
from .base import BaseRepository
from ..models.document import Document

class DocumentRepository(BaseRepository[Document]):
    """æ–‡æ¡£Repository"""
    
    async def get_by_user(self, user_id: int, skip: int = 0, limit: int = 100):
        stmt = select(self.model).where(
            self.model.uploaded_by == user_id
        ).offset(skip).limit(limit)
        result = self.db.execute(stmt)
        return result.scalars().all()
    
    async def get_by_status(self, status: str):
        stmt = select(self.model).where(self.model.status == status)
        result = self.db.execute(stmt)
        return result.scalars().all()
```

#### APIè·¯ç”±ç¤ºä¾‹

```python
# app/api/v1/documents/upload.py
from fastapi import APIRouter, UploadFile, File, Depends, BackgroundTasks
from sqlalchemy.orm import Session
from ....core.database import get_db
from ....services.document.processor import DocumentProcessor
from ....repositories.document import DocumentRepository
from ....models.document import Document

router = APIRouter()

@router.post("/upload")
async def upload_document(
    file: UploadFile = File(...),
    title: str = None,
    background_tasks: BackgroundTasks = None,
    db: Session = Depends(get_db),
    current_user = Depends(get_current_user)
):
    """ä¸Šä¼ æ–‡æ¡£"""
    # 1. ä¿å­˜æ–‡ä»¶
    file_path = await save_file(file)
    
    # 2. åˆ›å»ºæ–‡æ¡£è®°å½•
    repo = DocumentRepository(Document, db)
    document = await repo.create({
        "title": title or file.filename,
        "file_path": file_path,
        "file_type": file.content_type,
        "uploaded_by": current_user.id,
        "status": "processing"
    })
    
    # 3. åå°å¤„ç†æ–‡æ¡£
    background_tasks.add_task(
        process_document_task,
        document.id,
        file_path
    )
    
    return {
        "document_id": document.id,
        "status": "processing",
        "message": "æ–‡æ¡£ä¸Šä¼ æˆåŠŸ,æ­£åœ¨å¤„ç†ä¸­"
    }

async def process_document_task(document_id: int, file_path: str):
    """åå°ä»»åŠ¡: å¤„ç†æ–‡æ¡£"""
    processor = DocumentProcessor()
    await processor.process(document_id, file_path)
```

### 5.2 å‰ç«¯æ ¸å¿ƒä»£ç 

#### APIå°è£…

```typescript
// src/shared/utils/request.ts
import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios'
import { ElMessage } from 'element-plus'
import { useAuthStore } from '@/modules/auth/stores/authStore'

class Request {
  private instance: AxiosInstance

  constructor(config: AxiosRequestConfig) {
    this.instance = axios.create(config)
    this.setupInterceptors()
  }

  private setupInterceptors() {
    // è¯·æ±‚æ‹¦æˆªå™¨
    this.instance.interceptors.request.use(
      (config) => {
        const authStore = useAuthStore()
        if (authStore.token) {
          config.headers.Authorization = `Bearer ${authStore.token}`
        }
        return config
      },
      (error) => Promise.reject(error)
    )

    // å“åº”æ‹¦æˆªå™¨
    this.instance.interceptors.response.use(
      (response: AxiosResponse) => response.data,
      (error) => {
        const message = error.response?.data?.message || 'è¯·æ±‚å¤±è´¥'
        ElMessage.error(message)
        return Promise.reject(error)
      }
    )
  }

  request<T = any>(config: AxiosRequestConfig): Promise<T> {
    return this.instance.request(config)
  }

  get<T = any>(url: string, config?: AxiosRequestConfig): Promise<T> {
    return this.instance.get(url, config)
  }

  post<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {
    return this.instance.post(url, data, config)
  }

  put<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {
    return this.instance.put(url, data, config)
  }

  delete<T = any>(url: string, config?: AxiosRequestConfig): Promise<T> {
    return this.instance.delete(url, config)
  }
}

export const request = new Request({
  baseURL: import.meta.env.VITE_API_BASE_URL,
  timeout: 30000
})
```

#### æ¨¡å—åŒ–APIå®šä¹‰

```typescript
// src/modules/document/api/document.ts
import { request } from '@/shared/utils/request'
import type { Document, DocumentListResponse, UploadResponse } from '../types'

export const documentApi = {
  // ä¸Šä¼ æ–‡æ¡£
  upload(file: File, title?: string): Promise<UploadResponse> {
    const formData = new FormData()
    formData.append('file', file)
    if (title) formData.append('title', title)
    
    return request.post('/api/v1/documents/upload', formData, {
      headers: { 'Content-Type': 'multipart/form-data' }
    })
  },

  // è·å–æ–‡æ¡£åˆ—è¡¨
  getList(params: {
    page?: number
    page_size?: number
    status?: string
  }): Promise<DocumentListResponse> {
    return request.get('/api/v1/documents', { params })
  },

  // è·å–æ–‡æ¡£è¯¦æƒ…
  getDetail(id: number): Promise<Document> {
    return request.get(`/api/v1/documents/${id}`)
  },

  // åˆ é™¤æ–‡æ¡£
  delete(id: number): Promise<void> {
    return request.delete(`/api/v1/documents/${id}`)
  }
}
```

#### PiniaçŠ¶æ€ç®¡ç†

```typescript
// src/modules/document/stores/documentStore.ts
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'
import { documentApi } from '../api/document'
import type { Document } from '../types'

export const useDocumentStore = defineStore('document', () => {
  // çŠ¶æ€
  const documents = ref<Document[]>([])
  const currentDocument = ref<Document | null>(null)
  const loading = ref(false)
  const total = ref(0)

  // è®¡ç®—å±æ€§
  const completedDocuments = computed(() => 
    documents.value.filter(doc => doc.status === 'completed')
  )

  // æ–¹æ³•
  async function fetchDocuments(params: any) {
    loading.value = true
    try {
      const response = await documentApi.getList(params)
      documents.value = response.documents
      total.value = response.total
    } finally {
      loading.value = false
    }
  }

  async function fetchDocumentDetail(id: number) {
    loading.value = true
    try {
      currentDocument.value = await documentApi.getDetail(id)
    } finally {
      loading.value = false
    }
  }

  async function uploadDocument(file: File, title?: string) {
    const response = await documentApi.upload(file, title)
    await fetchDocuments({ page: 1, page_size: 10 })
    return response
  }

  async function deleteDocument(id: number) {
    await documentApi.delete(id)
    documents.value = documents.value.filter(doc => doc.id !== id)
  }

  return {
    documents,
    currentDocument,
    loading,
    total,
    completedDocuments,
    fetchDocuments,
    fetchDocumentDetail,
    uploadDocument,
    deleteDocument
  }
})
```

#### ç»„åˆå¼å‡½æ•°(Composables)

```typescript
// src/modules/document/composables/useDocument.ts
import { ref } from 'vue'
import { useDocumentStore } from '../stores/documentStore'
import { ElMessage } from 'element-plus'

export function useDocument() {
  const store = useDocumentStore()
  const uploading = ref(false)

  const handleUpload = async (file: File, title?: string) => {
    uploading.value = true
    try {
      const response = await store.uploadDocument(file, title)
      ElMessage.success('æ–‡æ¡£ä¸Šä¼ æˆåŠŸ')
      return response
    } catch (error) {
      ElMessage.error('æ–‡æ¡£ä¸Šä¼ å¤±è´¥')
      throw error
    } finally {
      uploading.value = false
    }
  }

  const handleDelete = async (id: number) => {
    try {
      await store.deleteDocument(id)
      ElMessage.success('åˆ é™¤æˆåŠŸ')
    } catch (error) {
      ElMessage.error('åˆ é™¤å¤±è´¥')
      throw error
    }
  }

  return {
    uploading,
    handleUpload,
    handleDelete
  }
}
```

#### Vueç»„ä»¶ç¤ºä¾‹

```vue
<!-- src/modules/document/views/DocumentList.vue -->
<template>
  <div class="document-list">
    <el-card>
      <template #header>
        <div class="header">
          <span>æ–‡æ¡£åˆ—è¡¨</span>
          <el-button type="primary" @click="showUploadDialog = true">
            ä¸Šä¼ æ–‡æ¡£
          </el-button>
        </div>
      </template>

      <el-table :data="store.documents" v-loading="store.loading">
        <el-table-column prop="title" label="æ ‡é¢˜" />
        <el-table-column prop="status" label="çŠ¶æ€">
          <template #default="{ row }">
            <el-tag :type="getStatusType(row.status)">
              {{ getStatusText(row.status) }}
            </el-tag>
          </template>
        </el-table-column>
        <el-table-column prop="uploaded_at" label="ä¸Šä¼ æ—¶é—´" />
        <el-table-column label="æ“ä½œ" width="200">
          <template #default="{ row }">
            <el-button size="small" @click="viewDetail(row.id)">
              æŸ¥çœ‹
            </el-button>
            <el-button 
              size="small" 
              type="danger" 
              @click="handleDelete(row.id)"
            >
              åˆ é™¤
            </el-button>
          </template>
        </el-table-column>
      </el-table>

      <el-pagination
        v-model:current-page="currentPage"
        v-model:page-size="pageSize"
        :total="store.total"
        @current-change="handlePageChange"
      />
    </el-card>

    <upload-dialog 
      v-model="showUploadDialog" 
      @success="handleUploadSuccess"
    />
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { useDocumentStore } from '../stores/documentStore'
import { useDocument } from '../composables/useDocument'
import UploadDialog from '../components/UploadDialog.vue'

const router = useRouter()
const store = useDocumentStore()
const { handleDelete: deleteDoc } = useDocument()

const showUploadDialog = ref(false)
const currentPage = ref(1)
const pageSize = ref(10)

const getStatusType = (status: string) => {
  const map: Record<string, any> = {
    processing: 'warning',
    completed: 'success',
    failed: 'danger'
  }
  return map[status] || 'info'
}

const getStatusText = (status: string) => {
  const map: Record<string, string> = {
    processing: 'å¤„ç†ä¸­',
    completed: 'å·²å®Œæˆ',
    failed: 'å¤±è´¥'
  }
  return map[status] || status
}

const viewDetail = (id: number) => {
  router.push(`/document/${id}`)
}

const handleDelete = async (id: number) => {
  await deleteDoc(id)
}

const handlePageChange = () => {
  store.fetchDocuments({
    page: currentPage.value,
    page_size: pageSize.value
  })
}

const handleUploadSuccess = () => {
  showUploadDialog.value = false
  handlePageChange()
}

onMounted(() => {
  handlePageChange()
})
</script>

<style scoped lang="scss">
.document-list {
  padding: 20px;

  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
}
</style>
```

---

## å…­ã€æ ¸å¿ƒæŠ€æœ¯å®ç°

### 6.1 æ–‡æ¡£å¤„ç†æµç¨‹

```python
# æ–‡æ¡£å¤„ç†å®Œæ•´æµç¨‹
def process_document(file_path):
    # 1. è§£ææ–‡æ¡£
    text = parse_document(file_path)  # PDF/Word/TXT
    
    # 2. æå–ç« èŠ‚ç»“æ„
    sections = extract_sections(text)
    
    # 3. ç”Ÿæˆæ‘˜è¦å’Œè¦ç‚¹
    summary = generate_summary(text)
    
    # 4. æ–‡æ¡£åˆ†å—(ç”¨äºRAG)
    chunks = chunk_document(text, chunk_size=500, overlap=50)
    
    # 5. ç”Ÿæˆå‘é‡å¹¶å­˜å‚¨åˆ°Chroma
    embeddings = embed_chunks(chunks)
    store_to_vectordb(chunks, embeddings)
    
    # 6. ä¿å­˜åˆ°MySQL
    save_to_mysql(sections, summary, chunks)
```

### 6.2 RAGé—®ç­”å®ç°

```python
# RAGé—®ç­”æ ¸å¿ƒä»£ç 
def answer_question(document_id, question):
    # 1. é—®é¢˜å‘é‡åŒ–
    question_embedding = embed_text(question)
    
    # 2. å‘é‡æ£€ç´¢(Top-K)
    relevant_chunks = vectordb.search(
        query_embedding=question_embedding,
        filter={"document_id": document_id},
        top_k=3
    )
    
    # 3. æ„å»ºPrompt
    context = "\n\n".join([chunk.content for chunk in relevant_chunks])
    prompt = f"""
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åŸ¹è®­åŠ©æ•™ã€‚è¯·åŸºäºä»¥ä¸‹æ–‡æ¡£å†…å®¹å›ç­”ç”¨æˆ·é—®é¢˜ã€‚

æ–‡æ¡£å†…å®¹:
{context}

ç”¨æˆ·é—®é¢˜: {question}

è¦æ±‚:
1. åªåŸºäºæä¾›çš„æ–‡æ¡£å†…å®¹å›ç­”
2. æ ‡æ³¨ä¿¡æ¯æ¥æº(ç« èŠ‚åç§°)
3. å¦‚æœæ–‡æ¡£ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯,æ˜ç¡®å‘ŠçŸ¥ç”¨æˆ·

è¯·ç”¨ä¸­æ–‡å›ç­”:
"""
    
    # 4. è°ƒç”¨LLM
    answer = call_llm(prompt)
    
    # 5. æ·»åŠ å¼•ç”¨æ¥æº
    sources = [{"section": chunk.section, "content": chunk.content[:100]} 
               for chunk in relevant_chunks]
    
    return {
        "answer": answer,
        "sources": sources
    }
```

### 6.3 è‡ªåŠ¨å‡ºé¢˜å®ç°

```python
# å•é€‰é¢˜ç”ŸæˆPrompt
SINGLE_CHOICE_PROMPT = """
åŸºäºä»¥ä¸‹æ–‡æ¡£å†…å®¹ç”Ÿæˆä¸€é“å•é€‰é¢˜:

æ–‡æ¡£å†…å®¹:
{content}

è¦æ±‚:
1. éš¾åº¦ç­‰çº§: {difficulty}
2. é¢˜ç›®è¦è€ƒå¯Ÿå¯¹æ ¸å¿ƒæ¦‚å¿µçš„ç†è§£
3. 4ä¸ªé€‰é¡¹,åªæœ‰1ä¸ªæ­£ç¡®ç­”æ¡ˆ
4. å¹²æ‰°é¡¹è¦æœ‰è¿·æƒ‘æ€§ä½†æ˜ç¡®é”™è¯¯
5. æä¾›è¯¦ç»†è§£æ

è¾“å‡ºJSONæ ¼å¼:
{{
  "question": "é¢˜ç›®å†…å®¹",
  "options": ["A. é€‰é¡¹1", "B. é€‰é¡¹2", "C. é€‰é¡¹3", "D. é€‰é¡¹4"],
  "answer": "B",
  "explanation": "è§£æå†…å®¹",
  "source": "æ¥æºç« èŠ‚"
}}
"""

# ç®€ç­”é¢˜ç”ŸæˆPrompt
ESSAY_PROMPT = """
åŸºäºä»¥ä¸‹æ–‡æ¡£å†…å®¹ç”Ÿæˆä¸€é“ç®€ç­”é¢˜:

æ–‡æ¡£å†…å®¹:
{content}

è¦æ±‚:
1. éš¾åº¦ç­‰çº§: {difficulty}
2. è€ƒå¯Ÿå¯¹çŸ¥è¯†ç‚¹çš„ç»¼åˆç†è§£å’Œåº”ç”¨
3. æä¾›å‚è€ƒç­”æ¡ˆå’Œè¯„åˆ†è¦ç‚¹

è¾“å‡ºJSONæ ¼å¼:
{{
  "question": "é¢˜ç›®å†…å®¹",
  "reference_answer": "å‚è€ƒç­”æ¡ˆ",
  "scoring_points": ["è¦ç‚¹1", "è¦ç‚¹2", "è¦ç‚¹3"],
  "source": "æ¥æºç« èŠ‚"
}}
"""

# è‡ªåŠ¨å‡ºé¢˜å‡½æ•°
def generate_questions(document_id, count=10, difficulty="medium"):
    # 1. è·å–æ–‡æ¡£å†…å®¹
    sections = get_document_sections(document_id)
    
    questions = []
    for section in sections[:count]:
        # 2. éšæœºé€‰æ‹©é¢˜å‹
        question_type = random.choice(["single", "judge", "essay"])
        
        # 3. è°ƒç”¨LLMç”Ÿæˆé¢˜ç›®
        if question_type == "single":
            prompt = SINGLE_CHOICE_PROMPT.format(
                content=section.content,
                difficulty=difficulty
            )
        elif question_type == "essay":
            prompt = ESSAY_PROMPT.format(
                content=section.content,
                difficulty=difficulty
            )
        
        result = call_llm(prompt)
        question_data = json.loads(result)
        
        # 4. ä¿å­˜åˆ°æ•°æ®åº“
        question = save_question(document_id, section.id, question_type, question_data)
        questions.append(question)
    
    return questions
```

### 6.4 ç®€ç­”é¢˜AIè¯„åˆ†

```python
# ç®€ç­”é¢˜è¯„åˆ†Prompt
ESSAY_SCORING_PROMPT = """
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„è€ƒè¯•è¯„åˆ†è€å¸ˆã€‚è¯·å¯¹å­¦ç”Ÿçš„ç®€ç­”é¢˜ç­”æ¡ˆè¿›è¡Œè¯„åˆ†ã€‚

é¢˜ç›®: {question}

å‚è€ƒç­”æ¡ˆ: {reference_answer}

è¯„åˆ†è¦ç‚¹: {scoring_points}

å­¦ç”Ÿç­”æ¡ˆ: {user_answer}

è¯·æŒ‰ä»¥ä¸‹æ ‡å‡†è¯„åˆ†:
1. è¦ç‚¹å®Œæ•´æ€§(60åˆ†): æ˜¯å¦è¦†ç›–æ‰€æœ‰å…³é”®è¦ç‚¹
2. å‡†ç¡®æ€§(30åˆ†): è¡¨è¿°æ˜¯å¦å‡†ç¡®æ— è¯¯
3. é€»è¾‘æ€§(10åˆ†): è®ºè¿°æ˜¯å¦æ¸…æ™°æœ‰æ¡ç†

è¾“å‡ºJSONæ ¼å¼:
{{
  "score": 85,
  "feedback": "è¯„åˆ†åé¦ˆ",
  "missing_points": ["ç¼ºå¤±çš„è¦ç‚¹"],
  "good_points": ["ç­”å¾—å¥½çš„åœ°æ–¹"]
}}
"""

def score_essay(question_id, user_answer):
    # 1. è·å–é¢˜ç›®ä¿¡æ¯
    question = get_question(question_id)
    
    # 2. æ„å»ºè¯„åˆ†Prompt
    prompt = ESSAY_SCORING_PROMPT.format(
        question=question.content,
        reference_answer=question.answer,
        scoring_points=question.scoring_points,
        user_answer=user_answer
    )
    
    # 3. è°ƒç”¨LLMè¯„åˆ†
    result = call_llm(prompt)
    scoring_result = json.loads(result)
    
    return scoring_result
```

### 6.5 å­¦ä¹ æ¨èç®—æ³•(ç®€åŒ–ç‰ˆ)

```python
def recommend_next_content(user_id):
    """æ¨èä¸‹ä¸€æ­¥å­¦ä¹ å†…å®¹"""
    
    # 1. è·å–ç”¨æˆ·å­¦ä¹ è®°å½•
    learned_docs = get_learned_documents(user_id)
    
    # 2. è·å–æ‰€æœ‰å¯å­¦ä¹ æ–‡æ¡£
    all_docs = get_all_documents()
    unlearned_docs = [doc for doc in all_docs if doc.id not in learned_docs]
    
    # 3. ä¼˜å…ˆæ¨èæœªå­¦ä¹ çš„æ–‡æ¡£
    if unlearned_docs:
        return {
            "type": "document",
            "content": unlearned_docs[0],
            "reason": "æ‚¨è¿˜æœªå­¦ä¹ æ­¤æ–‡æ¡£"
        }
    
    # 4. è·å–é”™é¢˜ç›¸å…³çš„ç« èŠ‚
    weak_sections = get_weak_sections(user_id, score_threshold=60)
    if weak_sections:
        return {
            "type": "review",
            "content": weak_sections[0],
            "reason": f"è¯¥ç« èŠ‚æµ‹è¯•æˆç»©è¾ƒä½({weak_sections[0].avg_score}åˆ†),å»ºè®®å¤ä¹ "
        }
    
    # 5. æ¨è7å¤©æœªå¤ä¹ çš„å†…å®¹
    need_review = get_documents_need_review(user_id, days=7)
    if need_review:
        return {
            "type": "review",
            "content": need_review[0],
            "reason": "å·²å­¦ä¹ è¶…è¿‡7å¤©,å»ºè®®å¤ä¹ å·©å›º"
        }
    
    return None

def get_weak_sections(user_id, score_threshold=60):
    """è·å–è–„å¼±ç« èŠ‚"""
    sql = """
        SELECT 
            ds.id, ds.title, ds.document_id,
            AVG(ar.score) as avg_score,
            COUNT(ar.id) as attempt_count
        FROM document_sections ds
        JOIN questions q ON q.section_id = ds.id
        JOIN answer_records ar ON ar.question_id = q.id
        WHERE ar.user_id = %s
        GROUP BY ds.id
        HAVING avg_score < %s
        ORDER BY avg_score ASC, attempt_count DESC
    """
    return execute_query(sql, (user_id, score_threshold))
```

---

## ä¸ƒã€APIæ¥å£è®¾è®¡

### 7.1 æ–‡æ¡£ç®¡ç†æ¥å£

```
POST /api/documents/upload
- ä¸Šä¼ æ–‡æ¡£
- è¯·æ±‚: multipart/form-data (file, title)
- å“åº”: {document_id, status, message}

GET /api/documents
- è·å–æ–‡æ¡£åˆ—è¡¨
- å‚æ•°: page=1, page_size=10, status=completed
- å“åº”: {documents: [], total, page, page_size}

GET /api/documents/{document_id}
- è·å–æ–‡æ¡£è¯¦æƒ…
- å“åº”: {id, title, summary, sections: [], created_at}

DELETE /api/documents/{document_id}
- åˆ é™¤æ–‡æ¡£
- å“åº”: {success, message}
```

### 7.2 æ™ºèƒ½é—®ç­”æ¥å£

```
POST /api/qa/ask
- æ™ºèƒ½é—®ç­”
- è¯·æ±‚: {document_id, question}
- å“åº”: {
    answer: "å›ç­”å†…å®¹",
    sources: [
      {section: "ç¬¬1ç« ", content: "å¼•ç”¨å†…å®¹ç‰‡æ®µ"}
    ],
    related_questions: ["ç›¸å…³é—®é¢˜1", "ç›¸å…³é—®é¢˜2"]
  }

GET /api/qa/history
- è·å–é—®ç­”å†å²
- å‚æ•°: document_id, page, page_size
- å“åº”: {records: [], total}

POST /api/qa/feedback
- é—®ç­”åé¦ˆ
- è¯·æ±‚: {qa_record_id, helpful: true/false}
- å“åº”: {success}
```

### 7.3 è€ƒè¯•æ¥å£

```
POST /api/questions/generate
- è‡ªåŠ¨ç”Ÿæˆé¢˜ç›®
- è¯·æ±‚: {
    document_id,
    count: 10,
    difficulty: "medium",
    types: ["single", "judge", "essay"]
  }
- å“åº”: {questions: [], total}

POST /api/exams/create
- åˆ›å»ºè€ƒè¯•
- è¯·æ±‚: {
    document_id,
    title,
    question_ids: [1,2,3],
    duration: 60,
    pass_score: 60
  }
- å“åº”: {exam_id}

GET /api/exams/{exam_id}
- è·å–è€ƒè¯•è¯¦æƒ…
- å“åº”: {id, title, questions: [], duration, total_score}

POST /api/exams/{exam_id}/submit
- æäº¤è€ƒè¯•ç­”æ¡ˆ
- è¯·æ±‚: {
    answers: [
      {question_id: 1, user_answer: "B"},
      {question_id: 2, user_answer: "ç­”æ¡ˆå†…å®¹"}
    ]
  }
- å“åº”: {
    total_score: 85,
    pass: true,
    details: [
      {question_id, is_correct, score, feedback}
    ]
  }

GET /api/exams/records
- è·å–è€ƒè¯•è®°å½•
- å‚æ•°: user_id, document_id
- å“åº”: {records: []}
```

### 7.4 ç”¨æˆ·æ¥å£

```
POST /api/auth/register
- ç”¨æˆ·æ³¨å†Œ
- è¯·æ±‚: {username, email, password}
- å“åº”: {user_id, token}

POST /api/auth/login
- ç”¨æˆ·ç™»å½•
- è¯·æ±‚: {username, password}
- å“åº”: {token, user: {id, username, role}}

GET /api/users/profile
- è·å–ç”¨æˆ·ä¿¡æ¯
- å“åº”: {id, username, email, role, created_at}
```

---

## å…«ã€å®æ–½è®¡åˆ’

### 8.1 å¼€å‘é˜¶æ®µåˆ’åˆ†

#### MVPæ ¸å¿ƒåŠŸèƒ½ (4å‘¨)

**Week 1: é¡¹ç›®æ­å»º + åŸºç¡€åŠŸèƒ½**
- åç«¯: FastAPIé¡¹ç›®åˆå§‹åŒ–ã€æ•°æ®åº“è®¾è®¡ã€ç”¨æˆ·è®¤è¯ã€æ–‡æ¡£ä¸Šä¼ 
- å‰ç«¯: Vue3 + Element Plusé¡¹ç›®æ­å»ºã€è·¯ç”±é…ç½®ã€ç™»å½•æ³¨å†Œã€å¸ƒå±€ç»„ä»¶
- ç¯å¢ƒ: Docker Composeé…ç½®ã€DeepSeek APIæ¥å…¥

**Week 2: æ–‡æ¡£å¤„ç† + RAGé—®ç­”**
- åç«¯: æ–‡æ¡£è§£æã€åˆ†å—ã€å‘é‡åŒ–ã€Chromaé›†æˆã€RAGé—®ç­”æ¥å£
- å‰ç«¯: æ–‡æ¡£æ¨¡å—(åˆ—è¡¨/è¯¦æƒ…/ä¸Šä¼ )ã€é—®ç­”æ¨¡å—(èŠå¤©ç•Œé¢/å†å²è®°å½•)

**Week 3: è‡ªåŠ¨å‡ºé¢˜ + è€ƒè¯•åŠŸèƒ½**
- åç«¯: è‡ªåŠ¨å‡ºé¢˜æ¥å£ã€è€ƒè¯•ç®¡ç†ã€ç­”é¢˜æ‰¹æ”¹ã€AIè¯„åˆ†
- å‰ç«¯: è€ƒè¯•æ¨¡å—(é¢˜ç›®ç”Ÿæˆ/è€ƒè¯•åˆ—è¡¨/ç­”é¢˜ç•Œé¢/æˆç»©æŸ¥çœ‹)

**Week 4: æµ‹è¯• + ä¼˜åŒ– + éƒ¨ç½²**
- åŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½ä¼˜åŒ–ã€Bugä¿®å¤
- UIä¼˜åŒ–ã€å“åº”å¼é€‚é…
- éƒ¨ç½²ä¸Šçº¿ã€ä½¿ç”¨æ–‡æ¡£ç¼–å†™

### 8.2 æŠ€æœ¯é£é™©ä¸åº”å¯¹

| é£é™©é¡¹ | å½±å“ | åº”å¯¹æªæ–½ |
|--------|------|----------|
| LLM APIæˆæœ¬è¿‡é«˜ | é«˜ | 1. å®ç°ç¼“å­˜æœºåˆ¶ 2. æ‰¹é‡å¤„ç† 3. åæœŸåˆ‡æ¢å†…ç½‘æ¨¡å‹ |
| æ–‡æ¡£è§£æå‡†ç¡®ç‡ä½ | ä¸­ | 1. å¤šç§è§£æåº“ç»„åˆ 2. OCRå¤‡é€‰ 3. äººå·¥æ ¡éªŒæ¥å£ |
| å‘é‡æ£€ç´¢æ€§èƒ½ç“¶é¢ˆ | ä¸­ | 1. ä¼˜åŒ–chunkç­–ç•¥ 2. å¢åŠ ç¼“å­˜å±‚ 3. ä½¿ç”¨æ›´é«˜æ•ˆçš„å‘é‡åº“ |
| æ¨¡å—é—´è€¦åˆåº¦é«˜ | ä¸­ | 1. ä¸¥æ ¼éµå¾ªåˆ†å±‚æ¶æ„ 2. ä½¿ç”¨ä¾èµ–æ³¨å…¥ 3. å®šæœŸä»£ç å®¡æŸ¥ |

---

## ä¹ã€æ‰©å±•æ€§è®¾è®¡

### 9.1 åç«¯æ‰©å±•æ€§

#### æ–°å¢ä¸šåŠ¡æ¨¡å—
```
1. åœ¨ app/api/v1/ ä¸‹åˆ›å»ºæ–°æ¨¡å—ç›®å½•
2. åœ¨ app/services/ ä¸‹åˆ›å»ºå¯¹åº”æœåŠ¡
3. åœ¨ app/repositories/ ä¸‹åˆ›å»ºæ•°æ®è®¿é—®å±‚
4. åœ¨ app/models/ å’Œ app/schemas/ ä¸‹å®šä¹‰æ•°æ®æ¨¡å‹
5. åœ¨ä¸»è·¯ç”±ä¸­æ³¨å†Œæ–°æ¨¡å—è·¯ç”±
```

#### åˆ‡æ¢LLMæ¨¡å‹
```python
# åªéœ€å®ç° BaseLLMClient æ¥å£
class NewLLMClient(BaseLLMClient):
    async def chat(self, messages, **kwargs):
        # å®ç°æ–°æ¨¡å‹çš„è°ƒç”¨é€»è¾‘
        pass

# åœ¨é…ç½®ä¸­åˆ‡æ¢
settings.LLM_PROVIDER = "new_model"
```

#### æ·»åŠ æ–°çš„æ–‡æ¡£ç±»å‹æ”¯æŒ
```python
# app/services/document/parser.py
class DocumentParser:
    def parse(self, file_path: str) -> str:
        ext = Path(file_path).suffix
        parser = self._get_parser(ext)
        return parser.parse(file_path)
    
    def _get_parser(self, ext: str):
        # ç­–ç•¥æ¨¡å¼,æ˜“äºæ‰©å±•
        parsers = {
            '.pdf': PDFParser(),
            '.docx': WordParser(),
            '.txt': TextParser(),
            '.md': MarkdownParser(),  # æ–°å¢
            '.html': HTMLParser(),    # æ–°å¢
        }
        return parsers.get(ext, TextParser())
```

### 9.2 å‰ç«¯æ‰©å±•æ€§

#### æ–°å¢ä¸šåŠ¡æ¨¡å—
```
1. åœ¨ src/modules/ ä¸‹åˆ›å»ºæ–°æ¨¡å—ç›®å½•
2. æŒ‰ç…§æ ‡å‡†ç»“æ„åˆ›å»º views/components/api/stores/types
3. åœ¨ router/routes.ts ä¸­æ³¨å†Œè·¯ç”±
4. åœ¨ä¸»èœå•ä¸­æ·»åŠ å…¥å£
```

#### æ¨¡å—ç›®å½•ç»“æ„æ¨¡æ¿
```
src/modules/new-module/
â”œâ”€â”€ views/              # é¡µé¢ç»„ä»¶
â”œâ”€â”€ components/         # ä¸šåŠ¡ç»„ä»¶
â”œâ”€â”€ api/               # APIæ¥å£
â”œâ”€â”€ stores/            # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ types/             # ç±»å‹å®šä¹‰
â”œâ”€â”€ composables/       # ç»„åˆå¼å‡½æ•°
â””â”€â”€ router.ts          # è·¯ç”±é…ç½®
```

### 9.3 é…ç½®é©±åŠ¨çš„åŠŸèƒ½å¼€å…³

```python
# app/core/config.py
class Settings(BaseSettings):
    # åŠŸèƒ½å¼€å…³
    ENABLE_AUTO_QUESTION: bool = True
    ENABLE_VOICE_QA: bool = False  # æœªæ¥åŠŸèƒ½
    
    # ä¸šåŠ¡é…ç½®
    MAX_UPLOAD_SIZE: int = 50 * 1024 * 1024  # 50MB
    CHUNK_SIZE: int = 500
    CHUNK_OVERLAP: int = 50
    
    # ç¼“å­˜é…ç½®
    CACHE_TTL: int = 3600
    ENABLE_CACHE: bool = True
```

### 9.4 V2.0åŠŸèƒ½è§„åˆ’

å½“MVPéªŒè¯æˆåŠŸå,å¯ä»¥æ‰©å±•ä»¥ä¸‹åŠŸèƒ½:

**æ¨¡å—4: å­¦ä¹ è¿›åº¦è·Ÿè¸ª**
- ä¸ªäººå­¦ä¹ çœ‹æ¿
- å­¦ä¹ æ—¶é•¿ç»Ÿè®¡
- æµ‹è¯•æˆç»©è¶‹åŠ¿
- é”™é¢˜æœ¬åŠŸèƒ½

**æ¨¡å—5: å­¦ä¹ è·¯å¾„æ¨è**
- æ™ºèƒ½æ¨èä¸‹ä¸€æ­¥å­¦ä¹ å†…å®¹
- å¤ä¹ æé†’
- å­¦ä¹ è®¡åˆ’ç”Ÿæˆ

**å…¶ä»–æ‰©å±•**
- å¤šæ–‡æ¡£å¯¹æ¯”å­¦ä¹ 
- å­¦ä¹ å°ç»„åŠŸèƒ½
- è¯­éŸ³é—®ç­”
- ç§»åŠ¨ç«¯APP

---

## åã€æˆæœ¬ä¼°ç®—

### 10.1 å¼€å‘æˆæœ¬
- åç«¯å¼€å‘: 1äºº Ã— 4å‘¨
- å‰ç«¯å¼€å‘: 1äºº Ã— 4å‘¨
- æµ‹è¯•: 1äºº Ã— 1å‘¨

### 10.2 è¿è¥æˆæœ¬(æœˆ)
- æœåŠ¡å™¨: Â¥500-1000 (äº‘æœåŠ¡å™¨ + æ•°æ®åº“)
- LLM API: Â¥1000-5000 (DeepSeek,åæœŸåˆ‡æ¢å†…ç½‘æ¨¡å‹æˆæœ¬ä¸º0)
- å­˜å‚¨: Â¥200-500 (æ–‡ä»¶å­˜å‚¨)
- æ€»è®¡: Â¥1700-6500/æœˆ(å‰æœŸ),åˆ‡æ¢å†…ç½‘æ¨¡å‹åé™è‡³Â¥700-1500/æœˆ

### 10.3 é™æœ¬ç­–ç•¥
1. å‰æœŸç”¨DeepSeek APIè°ƒè¯•,åæœŸåˆ‡æ¢å†…ç½‘30Bæ¨¡å‹
2. å®ç°æ™ºèƒ½ç¼“å­˜,å‡å°‘é‡å¤è°ƒç”¨
3. æ‰¹é‡å¤„ç†æ–‡æ¡£,æé«˜æ•ˆç‡
4. ä½¿ç”¨å¼€æºembeddingæ¨¡å‹(bge-large-zh)æœ¬åœ°éƒ¨ç½²

---

## åä¸€ã€åç»­æ‰©å±•æ–¹å‘

### 11.1 åŠŸèƒ½æ‰©å±•(V2.0)
- å­¦ä¹ è¿›åº¦è·Ÿè¸ªæ¨¡å—
- å­¦ä¹ è·¯å¾„æ¨èæ¨¡å—
- å¤šæ–‡æ¡£å¯¹æ¯”å­¦ä¹ 
- å­¦ä¹ å°ç»„åŠŸèƒ½
- è¯­éŸ³é—®ç­”
- ç§»åŠ¨ç«¯APP

### 11.2 æŠ€æœ¯å‡çº§
- å¤šæ¨¡æ€æ”¯æŒ(å›¾ç‰‡ã€è¡¨æ ¼è¯†åˆ«)
- å®æ—¶ååŒç¼–è¾‘
- ç¦»çº¿å­¦ä¹ æ¨¡å¼
- çŸ¥è¯†å›¾è°±å¯è§†åŒ–

### 11.3 å•†ä¸šåŒ–
- SaaSè®¢é˜…æ¨¡å¼
- ä¼ä¸šç‰ˆ(ç»„ç»‡ç®¡ç†)
- APIå¼€æ”¾å¹³å°

---

## åäºŒã€æ€»ç»“

### æ ¸å¿ƒä¼˜åŠ¿
1. **èšç„¦æ ¸å¿ƒ**: MVPç‰ˆæœ¬ä¸“æ³¨3ä¸ªæœ€æ ¸å¿ƒæ¨¡å—,å¿«é€ŸéªŒè¯ä»·å€¼
2. **æ¨¡å—åŒ–è®¾è®¡**: å‰åç«¯éƒ½é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„,æ˜“äºç»´æŠ¤å’Œæ‰©å±•
3. **æŠ€æœ¯æ ˆæˆç†Ÿ**: Vue3 + FastAPI + MySQL,ç”Ÿæ€å®Œå–„,å¼€å‘æ•ˆç‡é«˜
4. **æˆæœ¬å¯æ§**: 4å‘¨å®ŒæˆMVP,å‰æœŸç”¨APIè°ƒè¯•,åæœŸåˆ‡æ¢å†…ç½‘æ¨¡å‹

### å…³é”®æˆåŠŸå› ç´ 
- **ä»£ç è´¨é‡**: ä¸¥æ ¼éµå¾ªæ¨¡å—åŒ–è®¾è®¡,ä¿æŒä»£ç æ•´æ´
- **Promptå·¥ç¨‹**: LLMæç¤ºè¯è´¨é‡ç›´æ¥å½±å“åŠŸèƒ½æ•ˆæœ
- **ç”¨æˆ·ä½“éªŒ**: Element Plusæä¾›è‰¯å¥½çš„äº¤äº’ä½“éªŒ
- **æ€§èƒ½ä¼˜åŒ–**: åˆç†ä½¿ç”¨ç¼“å­˜,ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢

### MVPéªŒæ”¶æ ‡å‡†
- æ”¯æŒPDF/Word/TXTæ–‡æ¡£ä¸Šä¼ å’Œè§£æ
- æ–‡æ¡£è§£æå‡†ç¡®ç‡ > 90%
- RAGé—®ç­”å‡†ç¡®ç‡ > 85%
- è‡ªåŠ¨å‡ºé¢˜åŠŸèƒ½å¯ç”¨(3ç§é¢˜å‹)
- å®Œæ•´çš„è€ƒè¯•æµç¨‹
- é¡µé¢åŠ è½½æ—¶é—´ < 2ç§’

### å¼€å‘å»ºè®®
1. å…ˆå®ç°MVPæ ¸å¿ƒåŠŸèƒ½,å¿«é€ŸéªŒè¯
2. æ¯ä¸ªæ¨¡å—ç‹¬ç«‹å¼€å‘,é™ä½è€¦åˆ
3. åŠæ—¶ç¼–å†™æ–‡æ¡£å’Œæ³¨é‡Š
4. å®šæœŸä»£ç å®¡æŸ¥,ä¿è¯è´¨é‡
5. æ”¶é›†ç”¨æˆ·åé¦ˆ,V2.0å†æ‰©å±•å­¦ä¹ è®°å½•å’Œæ¨èåŠŸèƒ½

